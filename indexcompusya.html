<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compuya - Cat√°logo Din√°mico de Combos</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de la fuente Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <style>
        /* Estilos personalizados para el tema oscuro y efectos */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            /* Fondo oscuro principal */
            padding: 0.75rem 0;
            margin: 0;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .sr-only.focus:not(.sr-only) {
            position: static;
            width: auto;
            height: auto;
            padding: inherit;
            margin: inherit;
            overflow: visible;
            clip: auto;
            white-space: normal;
        }

        .container-center {
            /* Mantiene la adaptabilidad m√≥vil y centra el contenido */
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 0.25rem;
        }

        .product-card {
            /* Efecto de levitaci√≥n y sombra al pasar el rat√≥n */
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .product-card:hover,
        .product-card:focus {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 200, 255, 0.2);
            border-color: #06b6d4;
            /* Color cian de Tailwind para el borde en hover */
            outline: 2px solid #06b6d4;
        }

        /* Estilos para el Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: #ffffff;
            margin: auto;
            padding: 2rem;
            border-radius: 1rem;
            width: 95%;
            max-width: 600px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
            transform: translateY(-20px);
            transition: transform 0.3s ease-out;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .close-button {
            font-size: 2.5rem;
            line-height: 1;
            cursor: pointer;
            color: #4b5563;
        }

        .promo-tag {
            position: absolute;
            top: 0;
            right: 0;
            background-color: #f87171;
            /* Rojo Tailwind 500 */
            color: white;
            font-weight: bold;
            padding: 0.5rem 1rem;
            border-radius: 0 0.75rem 0 0.75rem;
            z-index: 10;
        }

        .benefit-card {
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            border-radius: 0.75rem;
            padding: 1rem;
            margin: 0.5rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .benefit-card:hover {
            transform: translateY(-2px);
        }

        @media (max-width: 640px) {
            .benefit-card {
                padding: 0.75rem;
                margin: 0.25rem 0;
            }
        }

        /* Mejoras para m√≥vil */
        @media (max-width: 768px) {
            body {
                padding: 0.5rem 0;
            }

            .container-center {
                padding: 0;
            }

            .product-card {
                padding: 0.75rem;
                margin-bottom: 0.75rem;
            }

            .product-card img {
                height: 100px;
            }

            .product-card h3 {
                font-size: 0.875rem;
            }

            .product-card button {
                padding: 0.5rem;
                font-size: 0.75rem;
            }

            .detail-view-mobile {
                padding: 0.75rem;
            }

            .customization-section {
                padding: 0.75rem;
            }

            .customization-section h4 {
                font-size: 1rem;
            }

            .price-display {
                font-size: 1.25rem;
            }

            /* Reducir tama√±os de fuente en header y t√≠tulos principales */
            header h1 {
                font-size: 1.5rem;
            }

            #dynamic-title {
                font-size: 1.25rem;
            }

            /* Ajustes en vista de detalle */
            #product-detail-content h1 {
                font-size: 1.5rem;
            }

            #final_offer_price {
                font-size: 2rem;
            }

            #local_final_offer_price {
                font-size: 1.5rem;
            }

            /* Botones en detalle */
            .wa-button-detail {
                font-size: 1rem;
                padding: 0.75rem;
            }

            #custom-wa-button {
                font-size: 1rem;
                padding: 0.75rem;
            }

            /* Beneficios y modal */
            .benefit-card h3 {
                font-size: 0.875rem;
            }

            .benefit-card p {
                font-size: 0.75rem;
            }

            .modal-content h3 {
                font-size: 1.5rem;
            }

            .modal-content p {
                font-size: 0.875rem;
            }

            .modal-content ul li {
                font-size: 0.75rem;
            }

            /* Asegurar centrado y evitar desbordamientos */
            .container-center {
                max-width: 100%;
                margin: 0 auto;
            }

            /* Ajustes en grid para mejor alineaci√≥n */
            #catalog-view {
                gap: 0.5rem;
            }

            #beneficios-section h2 {
                font-size: 1.25rem;
            }

            /* Evitar desbordamiento en precios de la vista de detalle */
            #product-detail-content .text-4xl {
                font-size: 1.25rem;
                word-break: break-word;
                overflow-wrap: break-word;
            }

            #product-detail-content .text-xl {
                font-size: 0.875rem;
            }

            #product-detail-content .text-lg {
                font-size: 0.75rem;
            }

            /* Ajustes adicionales para precios en m√≥vil */
            #final_offer_price {
                font-size: 1rem !important;
            }

            #local_final_offer_price {
                font-size: 0.875rem !important;
            }

            #local_final_price_display {
                text-align: left !important;
            }

            #product-detail-specs li {
                flex-direction: column;
                align-items: flex-start;
            }

            /* Ajustes en botones y elementos para evitar overflow */
            .wa-button-detail,
            #custom-wa-button {
                font-size: 0.875rem !important;
                padding: 0.5rem !important;
            }

            /* Ajustes en especificaciones t√©cnicas */
            #product-detail-specs li {
                flex-direction: column;
                align-items: flex-start;
            }

            #product-detail-specs li span:last-child {
                word-break: break-word;
                overflow-wrap: break-word;
            }
        }
    </style>
</head>

<body class="bg-gray-900 text-gray-100">
    <a href="#main-content"
        class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-blue-600 text-white p-2 z-50">Saltar
        al contenido principal</a>
    <div class="container-center">
        <!-- HERO SECTION -->
        <header id="main-header"
            class="bg-gradient-to-br from-blue-700 to-teal-500 text-white p-4 md:p-6 rounded-2xl shadow-2xl mb-6 text-center transform hover:scale-[1.01] transition duration-300">
            <!-- Placeholder para el Logo -->
            <img src="https://placehold.co/200x50/111827/ffffff?text=Compuya"
                alt="Logo de Compuya, tienda de computadoras" class="mx-auto h-12 mb-4 rounded-lg shadow-md" />
            <!-- TITULO PRINCIPAL -->
            <h1 class="text-2xl md:text-4xl font-extrabold mb-4 tracking-tight">Actualiza tu PC Hoy: Potencia y
                Velocidad Garantizada</h1>
            <!-- SUBTITULO DE PROMOCION -->
            <p
                class="text-lg md:text-xl font-bold text-yellow-300 bg-black bg-opacity=30 inline-block px-4 py-2 rounded-full border-2 border-yellow-400">
                ¬°√öltimos D√≠as! 10% DE DESCUENTO por Contado o Transferencia
            </p>
        </header>

        <!-- CUERPO PRINCIPAL -->
        <main id="main-content">
            <!-- TITULO DEL CAT√ÅLOGO -->
            <h2 id="dynamic-title" class="text-2xl md:text-4xl font-extrabold text-center mb-10 text-cyan-400">üî• Los
                Mejores Combos Calidad-Precio del Mercado üî•</h2>

            <!-- VISTA DE CAT√ÅLOGO (Grid en 2 columnas para que se vean cuadrados) -->
            <div id="catalog-view" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-4 md:gap-6">
            </div>

            <!-- Vista de Detalle (Inicialmente oculta) -->
            <div id="detail-view"
                class="hidden bg-white p-4 md:p-6 lg:p-10 rounded-xl shadow-2xl border border-gray-100 text-gray-900 detail-view-mobile">
                <button onclick="showCatalogView()"
                    class="flex items-center text-blue-600 hover:text-blue-800 font-semibold mb-4 md:mb-6 transition duration-150 text-base md:text-lg">
                    <!-- Icono de Flecha Atr√°s -->
                    <svg class="w-5 h-5 md:w-6 md:h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Volver a los Combos
                </button>
                <div id="product-detail-content" class="flex flex-col lg:flex-row lg:space-x-10">
                    <!-- Contenido del detalle cargado por JavaScript -->
                </div>
            </div>
        </main>

        <!-- SECCI√ìN DE BENEFICIOS -->
        <section id="beneficios-section" class="mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-center text-cyan-400 mb-4">¬øPor qu√© elegir Compuya?</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Entrega -->
                <div class="benefit-card">
                    <h3 class="text-lg font-bold text-teal-400 mb-2 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                        </svg>
                        Entrega a Domicilio
                    </h3>
                    <p class="text-gray-200 text-sm">Entregamos a domicilio y dejamos todo instalado <strong
                            class="text-yellow-200">sin costo</strong>.</p>
                </div>
                <!-- Pago Seguro -->
                <div class="benefit-card">
                    <h3 class="text-lg font-bold text-teal-400 mb-2 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Pago Seguro
                    </h3>
                    <p class="text-gray-200 text-sm">¬°Pagas solo cuando recibes, revisas y apruebas tu computadora! No
                        pedimos se√±a ni adelanto.</p>
                </div>
                <!-- Opciones de Pago -->
                <div class="benefit-card">
                    <h3 class="text-lg font-bold text-teal-400 mb-2 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z">
                            </path>
                        </svg>
                        Opciones de Pago
                    </h3>
                    <ul class="text-gray-200 text-sm space-y-1">
                        <li><span class="text-red-400 font-bold">10% OFF:</span> Contado / Transferencia</li>
                        <li><strong class="text-yellow-300">3 Cuotas SIN INTER√âS</strong> con tarjetas</li>
                        <li>Efectivo al recibir</li>
                    </ul>
                </div>
            </div>
            <!-- Garant√≠a -->
            <div class="benefit-card mt-4">
                <details class="text-center">
                    <summary
                        class="text-xl font-bold text-teal-400 cursor-pointer hover:text-teal-300 transition duration-200 mb-4">
                        Garant√≠a Total (Haz clic para expandir)</summary>
                    <div class="p-3 bg-gray-700 rounded-lg shadow-inner text-center">
                        <button id="openWarrantyModal"
                            class="w-full font-bold text-xl text-emerald-400 hover:text-emerald-300 flex items-center justify-center focus:outline-none transition duration-200 group"
                            aria-label="Abrir modal de garant√≠a">
                            <!-- Icono de Check en C√≠rculo -->
                            <svg class="w-6 h-6 mr-2 group-hover:rotate-12 transition duration-300" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Garant√≠a de 3 Meses
                        </button>
                        <p class="mt-2 text-sm text-gray-300">
                            Todas nuestras computadoras usadas incluyen <strong class="text-yellow-400">3 meses de
                                garant√≠a por escrito</strong>. Haz clic para ver detalles.
                        </p>
                    </div>
                </details>
            </div>
        </section>
    </div>

    <!-- Modal de Garant√≠a -->
    <div id="warrantyModal" class="modal" onclick="closeWarrantyModal(event)">
        <div class="modal-content relative text-gray-900" onclick="event.stopPropagation()">
            <!-- Bot√≥n de Cierre -->
            <span class="close-button absolute top-4 right-6 text-gray-400 hover:text-gray-900"
                onclick="closeWarrantyModal(event)">&times;</span>
            <h3 class="text-3xl font-bold text-emerald-600 mb-4 border-b pb-2">Garant√≠a Escrita (3 Meses)</h3>
            <p class="mb-4 text-lg">Tu tranquilidad es lo m√°s importante. Ofrecemos 3 meses completo de garant√≠a por
                escrito en todas nuestras computadoras usadas (CPU) por cualquier falla de hardware no causada por el
                usuario.</p>
            <ul class="list-disc list-inside space-y-2 text-gray-700">
                <li><strong class="font-semibold">Cobertura:</strong> Placa madre, procesador, memoria RAM, disco duro
                    (HDD/SSD).</li>
                <li><strong class="font-semibold">Exclusiones:</strong> Monitores, perif√©ricos (teclado, mouse, etc.),
                    fallas de software, virus o da√±os f√≠sicos/l√≠quidos causados por el cliente.</li>
                <li><strong class="font-semibold">Proceso:</strong> Si tienes un problema, nos contactas y gestionamos
                    el retiro para reparaci√≥n o reemplazo.</li>
            </ul>
            <button
                class="mt-6 w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition duration-200"
                onclick="closeWarrantyModal()">Entendido</button>
        </div>
    </div>

    <script>
        // Referencias a los elementos del DOM principales
        const mainHeader = document.getElementById('main-header');
        const keyInfoSection = document.getElementById('beneficios-section');
        const catalogView = document.getElementById('catalog-view');
        const detailView = document.getElementById('detail-view');
        const productDetailContent = document.getElementById('product-detail-content');
        const dynamicTitle = document.getElementById('dynamic-title');
        const warrantyModal = document.getElementById('warrantyModal');
        const openWarrantyModalBtn = document.getElementById('openWarrantyModal');

        // N√∫mero de WhatsApp (ACTUALIZADO)
        const WHATSAPP_NUMBER = "5491159980227";

        // Costos de las mejoras en valores num√©ricos enteros
        const UPGRADE_COSTS = {
            SSD_128: 25000,
            SSD_256: 38000,
            MONITOR_19: 20000
        };

        // Helper functions para manejar precios (quitar puntos, formatear con puntos)
        function formatPrice(number) {
            if (typeof number !== 'number' || isNaN(number)) return "Precio Inv√°lido";
            // Formatea con separador de miles (ej: 360000 -> 360.000)
            return number.toLocaleString('es-AR').replace(/,/g, '.');
        }

        // Define una lista de IDs de combos que usan procesadores Core2Duo
        const CORE2DUO_IDS = [1, 2];


        // Array de productos. Precios PROMO NOVIEMBRE - Contado o Transferencia exactos.
        const products = [
            // Combo 1 y 2 son Core2Duo (usan Win 10 por default)
            { id: 1, title: "Combo 001 (4GB)", basePrice: 136111, imageUrl: "https://raw.githubusercontent.com/arielg86/compuya/main/1.png", description: "El combo m√°s econ√≥mico, perfecto para tareas b√°sicas como navegar por internet, usar redes sociales y trabajos escolares o de oficina livianos. Viene listo para usar con todo el software instalado.", specs: [{ name: "Procesador", value: "Intel Core2Duo" }, { name: "Monitor", value: "17 pulgadas" }, { name: "Memoria RAM", value: "4GB" }, { name: "Disco", value: "500GB" }, { name: "Accesorios", value: "Teclado y mouse" }, { name: "Software", value: "Windows 10" }, { name: "Paquete Office", value: "completo" }, { name: "Garantia", value: "3 Meses de garantia" }] },
            { id: 2, title: "Combo 003 (8GB)", basePrice: 172778, imageUrl: "https://raw.githubusercontent.com/arielg86/compuya/main/2.png", description: "Un salto en fluidez. Con 8GB de RAM, este combo es ideal para multitarea, manejar m√∫ltiples pesta√±as del navegador, estudiar online y usar programas intermedios de manera c√≥moda.", specs: [{ name: "Procesador", value: "Intel Core2Duo" }, { name: "Monitor", value: "17 pulgadas" }, { name: "Memoria RAM", value: "8GB" }, { name: "Disco", value: "500GB" }, { name: "Accesorios", value: "Teclado y mouse" }, { name: "Software", value: "Windows 10" }, { name: "Paquete Office", value: "completo" }, { name: "Garantia", value: "3 Meses de garantia" }] },
            // Combos 3, 4, 5, 6, 7 son i3/i5
            { id: 3, title: "Combo 019", basePrice: 222778, imageUrl: "https://raw.githubusercontent.com/arielg86/compuya/main/3.png", description: "Potencia superior con procesador Intel i3. Excelente para quienes necesitan mayor velocidad de procesamiento y un rendimiento fiable para el trabajo y entretenimiento diario. M√°ximo valor por tu dinero.", specs: [{ name: "Procesador", value: "Intel i3" }, { name: "Monitor", value: "17 Pulgadas" }, { name: "Memoria RAM", value: "8GB" }, { name: "Disco", value: "500GB" }, { name: "Accesorios", value: "Teclado y mouse" }, { name: "Software", value: "Windows 10" }, { name: "Paquete Office", value: "completo" }, { name: "Garantia", value: "3 Meses de garantia" }] },
            { id: 4, title: "Combo 020", basePrice: 245000, imageUrl: "https://raw.githubusercontent.com/arielg86/compuya/main/4.png", description: "La mejor opci√≥n para el usuario avanzado. Los 16GB de RAM eliminan los cuellos de botella al trabajar con muchas aplicaciones abiertas, edici√≥n ligera o m√°quinas virtuales. M√°xima fluidez garantizada.", specs: [{ name: "Procesador", value: "Intel i3" }, { name: "Monitor", value: "17 Pulgadas" }, { name: "Memoria RAM", value: "16GB" }, { name: "Disco", value: "500GB" }, { name: "Accesorios", value: "Teclado y mouse" }, { name: "Software", value: "Windows 11" }, { name: "Paquete Office", value: "completo" }, { name: "Garantia", value: "3 Meses de garantia" }] },
            { id: 5, title: "Combo 029", basePrice: 233889, imageUrl: "https://raw.githubusercontent.com/arielg86/compuya/main/5.png", description: "Potencia de Intel i5 para profesionales y estudiantes. Maneja software m√°s demandante, bases de datos y tareas de dise√±o con facilidad. Incluye la √∫ltima versi√≥n de Windows.", specs: [{ name: "Procesador", value: "Intel i5" }, { name: "Monitor", value: "17 pulgadas" }, { name: "Memoria RAM", value: "8GB" }, { name: "Disco", value: "500GB" }, { name: "Accesorios", value: "Teclado y mouse" }, { name: "Software", value: "Windows 11" }, { name: "Paquete Office", value: "completo" }, { name: "Garantia", value: "3 Meses de garantia" }] },
            { id: 6, title: "Combo 030", basePrice: 256111, imageUrl: "https://raw.githubusercontent.com/arielg86/compuya/main/6.png", description: "El combo de m√°s alto rendimiento, dise√±ado para quienes no aceptan compromisos. Con 16GB de RAM y un procesador i5, es la m√°quina definitiva para multitarea intensa, desarrollo o edici√≥n multimedia. Gran almacenamiento.", specs: [{ name: "Procesador", value: "Intel i5" }, { name: "Monitor", value: "17 Pulgadas" }, { name: "Memoria RAM", value: "16GB" }, { name: "Disco", value: "1TB" }, { name: "Accesorios", value: "Teclado y mouse" }, { name: "Software", value: "Windows 11" }, { name: "Paquete Office", value: "completo" }, { name: "Garantia", value: "3 Meses de garantia" }] },
            {
                id: 7,
                title: "Combo 031 (16GB/SSD)",
                basePrice: 300556,
                imageUrl: "https://raw.githubusercontent.com/arielg86/compuya/main/7.png",
                description: "Configuraci√≥n Premium enfocada en la velocidad extrema. Arranca en segundos y carga aplicaciones instant√°neamente gracias a su SSD de 256GB ultra r√°pido. Ideal para profesionales y usuarios que exigen el mejor rendimiento en un monitor de 19 pulgadas.",
                specs: [
                    { name: "Procesador", value: "Intel i5" },
                    { name: "Monitor", value: "19 Pulgadas" },
                    { name: "Memoria RAM", value: "16GB" },
                    { name: "Disco", value: "SSD: 256GB" },
                    { name: "Accesorios", value: "Teclado y mouse" },
                    { name: "Software", value: "Windows 11" },
                    { name: "Paquete Office", value: "completo" },
                    { name: "Garantia", value: "3 Meses de garantia" }
                ]
            }
        ];

        /**
         * Abre el modal de garant√≠a.
         */
        function openWarrantyModal(event) {
            if (event && event.stopPropagation) {
                event.stopPropagation();
            }
            warrantyModal.classList.add('show');
        }

        /**
         * Cierra el modal de garant√≠a.
         */
        function closeWarrantyModal(event) {
            // Cierra si se hace clic en el fondo oscuro
            if (event && event.target && event.target === warrantyModal) {
                warrantyModal.classList.remove('show');
                return;
            }
            // Cierra si se hace clic en el bot√≥n de cierre (x) o "Entendido"
            if (event && (event.target.className.includes('close-button') || event.target.tagName === 'BUTTON' && event.target.textContent === 'Entendido')) {
                warrantyModal.classList.remove('show');
                return;
            }
        }

        /**
         * Abre WhatsApp con un mensaje predefinido para el producto.
         * @param {string} message - Mensaje a enviar.
         */
        function openWhatsApp(message) {
            // Usa el n√∫mero de WhatsApp actualizado
            const phoneNumber = WHATSAPP_NUMBER;
            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/${phoneNumber}?text=${encodedMessage}`, '_blank');
        }

        // Asigna el evento al bot√≥n de garant√≠a
        openWarrantyModalBtn.onclick = openWarrantyModal;
        warrantyModal.onclick = closeWarrantyModal;


        /**
         * Actualiza la lista de especificaciones t√©cnicas en el detalle del producto,
         * incluyendo la actualizaci√≥n de Windows si aplica.
         * @param {Object} product - Objeto del producto base.
         * @param {string} diskSpec - Especificaci√≥n actual del disco.
         * @param {string} monitorSpec - Especificaci√≥n actual del monitor.
         * @param {string} softwareSpec - Especificaci√≥n actual del software.
         */
        function updateSpecsTable(product, diskSpec, monitorSpec, softwareSpec) {
            const specsListElement = document.getElementById('product-detail-specs');
            if (!specsListElement) return;

            // Creamos una copia de las especificaciones base para modificarlas
            const updatedSpecs = [...product.specs];

            // Helper para encontrar y actualizar un spec
            const updateSpec = (name, value) => {
                const index = updatedSpecs.findIndex(s => s.name === name);
                if (index !== -1) {
                    updatedSpecs[index].value = value;
                } else {
                    updatedSpecs.push({ name: name, value: value });
                }
            };

            // 1. Actualizar Disco
            updateSpec("Disco", diskSpec);

            // 2. Actualizar Monitor
            updateSpec("Monitor", monitorSpec);

            // 3. Actualizar Software
            updateSpec("Software", softwareSpec);


            // 4. Generar el nuevo HTML de la lista
            specsListElement.innerHTML = updatedSpecs.map(spec => {
                // Determina si esta especificaci√≥n fue personalizada o es destacable
                const isDiskCustom = spec.name === "Disco" && (spec.value.includes("SSD"));
                const isMonitorCustom = spec.name === "Monitor" && spec.value.includes('19"');
                const isSoftwareCustom = spec.name === "Software" && spec.value.includes("Win 11");

                const highlightClass = (isDiskCustom || isMonitorCustom || isSoftwareCustom)
                    ? 'bg-yellow-100 border-yellow-300' : 'bg-gray-50 border-gray-100';

                return `
                    <li class="flex flex-col sm:flex-row justify-between p-3 rounded-lg shadow-sm border ${highlightClass} text-sm md:text-base">
                        <span class="font-medium text-gray-500">${spec.name}:</span>
                        <span class="font-bold text-gray-800">${spec.value}</span>
                    </li>
                `;
            }).join('');
        }

        /**
         * Calcula el precio final basado en las selecciones de mejora del usuario.
         * Actualiza los precios, el bot√≥n de WhatsApp y las especificaciones.
         * @param {Object} product - Objeto del producto base.
         */
        function calculateFinalPrice(product) {
            const detailDiv = document.getElementById('detail-view');
            if (!detailDiv) return;

            // Precio base de partida (Oferta con 10% OFF para Contado, y Base para Cuotas)
            let currentBasePriceOffer = Math.round(product.basePrice * 0.9);
            let currentBasePriceCuotas = product.basePrice;

            // Buscar valores base de specs
            let diskSpec = product.specs.find(s => s.name === "Disco")?.value || "500 GB HDD";
            let monitorSpec = product.specs.find(s => s.name === "Monitor")?.value || '17" LCD';
            // Obtener el Software base (ej. "Win 10, Office completo y Antivirus")
            let softwareSpec = product.specs.find(s => s.name === "Software")?.value || "Software Base";

            let upgradesDescription = [];
            let diskUpgradeCost = 0;
            let isSsdSelected = false; // Bandera para la l√≥gica de Win 11

            // 1. Obtener Mejora de Disco
            const diskSelected = detailDiv.querySelector('input[name="disk_upgrade"]:checked');
            if (diskSelected && diskSelected.value !== 'none') {
                isSsdSelected = true;
                if (diskSelected.value === 'ssd_128') {
                    diskUpgradeCost = UPGRADE_COSTS.SSD_128;
                    diskSpec = '128 GB SSD (¬°Arranca en Segundos!)';
                    upgradesDescription.push("Disco: SSD 128GB");
                } else if (diskSelected.value === 'ssd_256') {
                    diskUpgradeCost = UPGRADE_COSTS.SSD_256;
                    diskSpec = '256 GB SSD (M√°xima Velocidad)';
                    upgradesDescription.push("Disco: SSD 256GB");
                }
            }

            // 2. L√≥gica de Actualizaci√≥n de Software (Windows 11)
            // SI el combo NO es Core2Duo Y se seleccion√≥ SSD
            const isCore2Duo = CORE2DUO_IDS.includes(product.id);
            if (!isCore2Duo && isSsdSelected) {
                // Actualiza la especificaci√≥n de software a Win 11 si es i3/i5 y lleva SSD
                softwareSpec = "Win 11 (Actualizado por SSD), Office completo y Antivirus";
            } else {
                // Si no aplica, se mantiene el software original del producto
                softwareSpec = product.specs.find(s => s.name === "Software")?.value || "Software Base";
            }


            // 3. Obtener Mejora de Monitor
            const monitorCheckbox = detailDiv.querySelector('#monitor_upgrade');
            let monitorUpgradeCost = 0;
            if (monitorCheckbox && monitorCheckbox.checked) {
                monitorUpgradeCost = UPGRADE_COSTS.MONITOR_19;
                monitorSpec = '19" LCD (Mejora de Tama√±o)';
                upgradesDescription.push("Monitor: 19\"");
            } else {
                // Si no se selecciona, se mantiene la spec original del monitor
                upgradesDescription.push(monitorSpec);
            }

            // 4. Calcular Precios Finales
            const finalPriceOffer = currentBasePriceOffer + diskUpgradeCost + monitorUpgradeCost;
            const finalPriceCuotas = currentBasePriceCuotas + diskUpgradeCost + monitorUpgradeCost;
            // Redondeamos para evitar decimales en la cuota
            const finalCuotaValue = Math.round(finalPriceCuotas / 3);

            // 5. Actualizar UI de Precios
            // Elementos de la cabecera (arriba)
            const priceOfferElement = detailDiv.querySelector('#final_offer_price');
            const priceCuotasElement = detailDiv.querySelector('#final_cuotas_price');
            const cuotasValueElement = detailDiv.querySelector('#final_cuota_value');

            // Elementos para la vista localizada (debajo de las opciones)
            const localPriceOfferElement = detailDiv.querySelector('#local_final_offer_price');
            const localCuotasPriceElement = detailDiv.querySelector('#local_final_cuotas_price');
            const localCuotasValueElement = detailDiv.querySelector('#local_final_cuota_value');

            const waButton = detailDiv.querySelector('.wa-button-detail');

            // Actualizar precio principal (arriba)
            if (priceOfferElement) priceOfferElement.textContent = formatPrice(finalPriceOffer);
            if (priceCuotasElement) priceCuotasElement.textContent = formatPrice(finalPriceCuotas);
            if (cuotasValueElement) cuotasValueElement.textContent = formatPrice(finalCuotaValue);

            // Actualizar precio localizado (debajo de la personalizaci√≥n)
            if (localPriceOfferElement) localPriceOfferElement.textContent = formatPrice(finalPriceOffer);
            if (localCuotasPriceElement) localCuotasPriceElement.textContent = formatPrice(finalPriceCuotas);
            if (localCuotasValueElement) localCuotasValueElement.textContent = formatPrice(finalCuotaValue);

            // 6. ACTUALIZAR TABLA DE ESPECIFICACIONES T√âCNICAS
            updateSpecsTable(product, diskSpec, monitorSpec, softwareSpec);

            // 7. Actualizar Mensaje de WhatsApp
            const upgradesText = upgradesDescription.length > 0 ? ` con la configuraci√≥n personalizada: ${upgradesDescription.join(', ')}` : "";
            const waMessage = `Hola, quiero COMPRAR el combo ${product.title}${upgradesText}. ¬øMe pod√©s dar el precio final?`;
            if (waButton) waButton.setAttribute('onclick', `openWhatsApp('${waMessage}')`);

            // Actualizar el bot√≥n de WhatsApp personalizado en la secci√≥n de personalizaci√≥n
            const customWaButton = detailDiv.querySelector('#custom-wa-button');
            if (customWaButton) customWaButton.setAttribute('onclick', `openWhatsApp('${waMessage}')`);
        }


        /**
         * Crea y devuelve la tarjeta HTML para un producto, estilo MercadoLibre.
         */
        function renderProductCard(product) {
            const offerPrice = Math.round(product.basePrice * 0.9);
            const cuotaValue = Math.round(product.basePrice / 3);

            const card = document.createElement('div');
            card.className = 'product-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow duration-200 cursor-pointer';
            card.setAttribute('onclick', `showProductDetail(${product.id})`);

            const imagePlaceholder = `https://placehold.co/300x300/f8f9fa/6c757d?text=${product.title.replace(/ /g, '+')}`;

            card.innerHTML = `
                <!-- Imagen del producto -->
                <div class="relative mb-3">
                    <img
                        src="${product.imageUrl}"
                        alt="${product.title}"
                        class="w-full h-48 object-cover rounded"
                        onerror="this.onerror=null;this.src='${imagePlaceholder}';"
                    />
                    <div class="absolute top-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded font-bold">
                        OFERTA
                    </div>
                </div>

                <!-- Informaci√≥n del producto -->
                <div class="flex-1">
                    <h3 class="text-sm text-gray-900 mb-2 line-clamp-2 leading-tight font-medium">${product.title}</h3>



                    <!-- Env√≠o -->
                    <div class="text-xs text-green-700 font-medium mb-2 flex items-center">
                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        Env√≠o gratis a todo el pa√≠s
                    </div>

                    <!-- Vendedor -->
                    <div class="text-xs text-gray-500 mb-3">
                        por <span class="font-medium text-blue-600">Compuya</span>
                    </div>

                    <!-- Bot√≥n de ver caracter√≠sticas -->
                    <button class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded transition-colors duration-200 text-sm mb-2" onclick="event.stopPropagation(); showProductDetail(${product.id});">
                        Ver Caracter√≠sticas
                    </button>

                    <!-- Bot√≥n de compra -->
                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded transition-colors duration-200 text-sm" onclick="event.stopPropagation(); openWhatsApp('¬°Hola! Quiero comprar el ${product.title}. ¬øMe ayud√°s con la compra y me das el precio?');">
                        Consultar por WhatsApp
                    </button>
                </div>
            `;
            return card;
        }

        /**
         * Muestra la vista de cat√°logo principal con todos los productos.
         */
        function renderCatalogView() {
            // Muestra los elementos ocultos al volver al cat√°logo
            mainHeader.classList.remove('hidden');
            keyInfoSection.classList.remove('hidden');

            catalogView.innerHTML = '';
            products.forEach(product => {
                catalogView.appendChild(renderProductCard(product));
            });
            dynamicTitle.textContent = "üî• Los Mejores Combos Calidad-Precio del Mercado üî•";
        }

        /**
         * Funci√≥n para cambiar de la vista de detalle a la vista de cat√°logo.
         */
        function showCatalogView() {
            detailView.classList.add('hidden');
            catalogView.classList.remove('hidden');
            dynamicTitle.classList.remove('hidden');
            renderCatalogView();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        /**
         * Muestra la vista de detalle para un producto espec√≠fico.
         */
        function showProductDetail(productId) {
            console.log('showProductDetail called with', productId);
            const product = products.find(p => p.id === productId);

            if (!product) {
                console.error("Producto no encontrado:", productId);
                return;
            }

            // OCULTA CABECERA Y SECCI√ìN DE INFORMACI√ìN CLAVE (SEG√öN REQUERIMIENTO)
            mainHeader.classList.add('hidden');
            keyInfoSection.classList.add('hidden');

            catalogView.classList.add('hidden');
            dynamicTitle.classList.add('hidden');
            detailView.classList.remove('hidden');

            const detailImagePlaceholder = `https://placehold.co/800x400/e0f2f1/042f2e?text=${product.title.replace(/ /g, '+')}`;

            // Solo los combos 1 al 5 son personalizables porque los 6 y 7 ya vienen optimizados.
            const isCustomizable = productId <= 5;

            // Obtener las especificaciones iniciales para el primer render
            const initialDiskSpec = product.specs.find(s => s.name === "Disco")?.value || "500 GB HDD";
            const initialMonitorSpec = product.specs.find(s => s.name === "Monitor")?.value || '17" LCD';
            const initialSoftwareSpec = product.specs.find(s => s.name === "Software")?.value || "Software Base";


            let customizationHTML = '';

            // Contenido de la vista de detalle estilo MercadoLibre
            // ESTE BLOQUE FUE MOVIDO FUERA DEL IF (isCustomizable)
            productDetailContent.innerHTML = `
                <!-- Galer√≠a de im√°genes (izquierda) -->
                <div class="md:w-2/5 mb-6 md:mb-0">
                    <div class="sticky top-4">
                        <!-- Imagen principal -->
                        <div class="relative mb-4">
                            <img
                                src="${product.imageUrl.replace('400x200', '800x400')}"
                                alt="${product.title}"
                                class="w-full h-auto rounded-lg shadow-md border border-gray-200"
                                onerror="this.onerror=null;this.src='${detailImagePlaceholder}';"
                            />
                            <div class="absolute top-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded font-bold">
                                OFERTA
                            </div>
                        </div>

                        <!-- Miniaturas (placeholder) -->
                        <div class="flex space-x-2 overflow-x-auto">
                            <img src="${product.imageUrl}" alt="Vista 1" class="w-16 h-16 object-cover rounded border-2 border-blue-500 cursor-pointer">
                            <div class="w-16 h-16 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-500">+3</div>
                        </div>

                        <p class="text-xs text-gray-500 mt-2 text-center">La imagen es ilustrativa. Los componentes pueden variar ligeramente en marca seg√∫n stock.</p>
                    </div>
                </div>

                <!-- Informaci√≥n del producto (derecha) -->
                <div class="md:w-3/5 md:pl-8">
                    <!-- Estado del producto -->
                    <div class="flex items-center mb-2">
                        <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                        <span class="text-sm text-green-700 font-medium">Nuevo</span>
                        <span class="mx-2 text-gray-300">|</span>
                        <span class="text-sm text-gray-600">+1000 vendidos</span>
                    </div>

                    <!-- T√≠tulo del producto -->
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4 leading-tight">${product.title}</h1>

                    <!-- Calificaci√≥n y rese√±as -->
                    <div class="flex items-center mb-4">
                        <div class="flex items-center mr-4">
                            <div class="flex text-yellow-400">
                                ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ
                            </div>
                            <span class="text-sm text-gray-600 ml-1">(4.8)</span>
                        </div>
                        <span class="text-sm text-blue-600 hover:text-blue-800 cursor-pointer">23 opiniones</span>
                    </div>



                    <!-- Cantidad -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Cantidad:</label>
                        <div class="flex items-center">
                            <button class="border border-gray-300 px-3 py-1 rounded-l hover:bg-gray-50">-</button>
                            <input type="number" value="1" min="1" class="border-t border-b border-gray-300 w-16 text-center py-1">
                            <button class="border border-gray-300 px-3 py-1 rounded-r hover:bg-gray-50">+</button>
                            <span class="ml-3 text-sm text-gray-600">disponibles</span>
                        </div>
                    </div>

                    <!-- Botones de compra -->
                    <div class="space-y-3 mb-8">
                        <button class="wa-button-detail w-full bg-blue-600 hover:bg-blue-700 text-white text-lg font-bold py-4 px-6 rounded-lg shadow-lg transition duration-200 flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.1 5H19M7 13l-1.1 5M7 13l1.1-5"></path>
                            </svg>
                            Consultar por WhatsApp
                        </button>
                    </div>

                    <!-- Informaci√≥n del vendedor -->
                    <div class="border-t pt-6 mb-6">
                        <div class="flex items-center mb-3">
                            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold mr-3">
                                C
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">Compuya</div>
                                <div class="text-sm text-gray-600">98.7% calificaci√≥n positiva</div>
                            </div>
                        </div>
                        <div class="text-sm text-gray-600 space-y-1">
                            <div>‚úì Entrega a domicilio incluida</div>
                            <div>‚úì Garant√≠a de 3 meses</div>
                            <div>‚úì Pago contra entrega disponible</div>
                        </div>
                    </div>

                    ${customizationHTML}

                    <!-- Descripci√≥n -->
                    <div class="border-t pt-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">Descripci√≥n</h3>
                        <p class="text-gray-700 leading-relaxed mb-4">${product.description}</p>

                        <!-- Caracter√≠sticas principales -->
                        <div class="bg-gray-50 rounded-lg p-4 mb-6">
                            <h4 class="font-medium text-gray-900 mb-2">Caracter√≠sticas principales:</h4>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>‚Ä¢ Procesador potente para tareas diarias</li>
                                <li>‚Ä¢ Memoria RAM suficiente para multitarea</li>
                                <li>‚Ä¢ Almacenamiento adecuado para tus archivos</li>
                                <li>‚Ä¢ Monitor de calidad para una buena experiencia visual</li>
                                <li>‚Ä¢ Software completo incluido</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Especificaciones t√©cnicas -->
                    <div class="border-t pt-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">Especificaciones t√©cnicas</h3>
                        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                            <ul id="product-detail-specs" class="divide-y divide-gray-200">
                                <!-- Se poblar√° con JS llamando a updateSpecsTable -->
                            </ul>
                        </div>
                    </div>

                    <!-- Preguntas y respuestas -->
                    <div class="border-t pt-6 mt-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">Preguntas y respuestas</h3>
                        <div class="space-y-3">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <div class="font-medium text-gray-900 mb-1">¬øIncluye instalaci√≥n?</div>
                                <div class="text-gray-700 text-sm">S√≠, incluimos instalaci√≥n completa sin costo adicional.</div>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <div class="font-medium text-gray-900 mb-1">¬øQu√© garant√≠a tiene?</div>
                                <div class="text-gray-700 text-sm">Todos nuestros combos tienen 3 meses de garant√≠a por escrito.</div>
                            </div>
                        </div>
                        <button class="mt-3 text-blue-600 hover:text-blue-800 font-medium" onclick="openWhatsApp('Quiero consultar sobre el combo ${product.title}')">
                            Ver todas las preguntas
                        </button>
                    </div>
                </div>
            `;

            console.log('Detail content set for product', productId);
            // Inicializa el c√°lculo de precio para configurar el bot√≥n de WhatsApp y las specs iniciales
            calculateFinalPrice(product);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Inicializa la vista del cat√°logo al cargar la p√°gina
        window.onload = renderCatalogView;

        // Hace las funciones accesibles globalmente
        window.showProductDetail = showProductDetail;
        window.showCatalogView = showCatalogView;
        window.openWhatsApp = openWhatsApp;
        window.closeWarrantyModal = closeWarrantyModal;
        window.openWarrantyModal = openWarrantyModal;
        window.calculateFinalPrice = calculateFinalPrice; // Se hace global para el onchange en el HTML
    </script>
</body>

</html>
